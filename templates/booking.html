{% extends 'base.html' %}

{% block content %}

{{user.username}}


{% if user.is_authenticated %}

<div class="container-fluid p-2 text-info text-center">  
  <!--Show user bookings, enable edit and delete-->
  <div class="row">
    <div class="col-md-6">
      <h1 class="text-center text-black">Bookings for customer {{ user.username }}</h1>
      <ul>
      {% for booking in bookings %}
          <li>
              {{ booking }}
              <form method="post" action="{% url 'get_cancel_booking_form' %}">
                  {% csrf_token %}
                  <p style="color:red;"><strong>Are you sure you want to delete? This cannot be undone!</strong></p>
                  <input type="hidden" name="booking_id" value="{{ booking.id }}">
                  <button type="submit" class="btn-signup mb-1">Delete</button>                
              </form>
              <button class="btn-signup" type="submit"><a href="{% url 'get_modify_booking_form' booking.id %}">Update booking</a></button>              
          </li>
      {% empty %}
          <h3>No existing bookings for customer {{ user.username }}</h3>
      {% endfor %}
      </ul>
    </div>
    <div class="col-md-6 bg-light text-black text-center">
      <h3 >Online Booking Form</h1>
      <form class= "book-form" method="POST">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn-signup">Make Booking</button>           
      </form>         
    </div>
  </div>
  {% else %}
  <div class="jumbotron  text-center bg-light border-rounded">
    <h1 class="display-4">Make a Booking!</h1>
    <p class="lead">In order to make a booking please sign up or login <a href="{% url 'account_login' %}"> here</a> first! Thank you!</p>
    <a class="btn btn-primary btn-lg" href="{{ '/' }}" role="button">Home</a>
    <hr class="my-4">
  </div>
</div>

  {% endif %}

  {% endblock %}
